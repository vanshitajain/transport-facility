<h2>Pick a Ride</h2>

<form [formGroup]="form" (ngSubmit)="searchRides()">
  <div class="form-group">
    <label>Pick-up Point*</label>
    <input formControlName="pickupPoint" />
  </div>
  <div class="error-message">
    <span *ngIf="form.get('pickupPoint')?.invalid && form.get('pickupPoint')?.touched">Pick-up Point is required</span>
  </div>

  <div class="form-group">
    <label>Destination*</label>
    <input formControlName="destination" />
  </div>
  <div class="error-message">
    <span *ngIf="form.get('destination')?.invalid && form.get('destination')?.touched">Destination is required</span>
  </div>

  <div class="form-group">
    <label>Book as Employee ID*</label>
    <input formControlName="employeeId" />
  </div>
  <div class="error-message">
    <span *ngIf="form.get('employeeId')?.invalid && form.get('employeeId')?.touched">Employee ID is required</span>
  </div>

  <div class="form-group">
    <label>Preferred Time* (HH:mm)</label>
    <input type="time" formControlName="time" />
  </div>
  <div class="error-message">
    <span *ngIf="form.get('time')?.invalid && form.get('time')?.touched">Time is required</span>
  </div>

  <div class="form-group">
    <label>Vehicle Type</label>
    <select formControlName="vehicleType">
      <option *ngFor="let v of vehicleTypes" [value]="v">{{ v }}</option>
    </select>
  </div>
  <div class="error-message"></div>

  <button type="submit">Search Rides</button>
</form>

<p class="message" [ngClass]="{'success': message.includes('successfully'), 'error': !message.includes('successfully')}"
  *ngIf="message">{{ message }}</p>

<table *ngIf="rides.length > 0">
  <thead>
    <tr>
      <th>Time</th>
      <th>Vehicle</th>
      <th>Vehicle No</th>
      <th>Vacant Seats</th>
      <th>Pickup</th>
      <th>Destination</th>
      <th>Creator Employee ID</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let r of rides">
      <td>{{ r.time }}</td>
      <td>{{ r.vehicleType }}</td>
      <td>{{ r.vehicleNo }}</td>
      <td>{{ r.vacantSeats }}</td>
      <td>{{ r.pickupPoint }}</td>
      <td>{{ r.destination }}</td>
      <td>{{ r.creatorEmployeeId }}</td>
      <td>
        <button (click)="bookRide(r)" [disabled]="r.vacantSeats < 1">Book</button>
      </td>
    </tr>
  </tbody>
</table>